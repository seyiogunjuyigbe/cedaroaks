<% include ../partials/header.ejs %>
<style>
table{
    width: 100%;
    text-overflow: clip;
}
</style>
<div class="container">
    <div class="jumbotron">
        <h1>Your Loan Status</h1>
    </div>
    <div>
        <table class="table table-striped table-bordered table-hover">
                <thead class="thead-light">
                    <tr>
                        <th scope="col">Date Applied</th>
                        <th scope="col">Amount Requested</th>
                        <th scope="col">Duration</th>
                        <th scope="col">Payback Amount</th>
                        <th scope="col">Guarantor 1</th>
                        <th scope="col">Guarantor 2</th>
                        <th scope="col">Status</th>
                    </tr>
                </thead>
                <tbody>
                    <%User.loanRequests.forEach(function(request){ %>
                        <tr>
                            <td><%=request.dateApplied%></td> 
                            <td><%=request.amount%></td>  
                            <td><%=request.duration%> months</td> 
                            <td><%=request.paybackAmount%></td>  
                            <% if(request.guarantor1ID == null || request.guarantor1ID == undefined){ %>
                                <td>No Guarantor</td>
                                <td>No Guarantor</td>
                          <%  } else{ %>
                            <td><a href="/user/profile/<%=request.guarantor1ID%>"><%=request.guarantor1Username%></a></td>  
                            <td><a href="/user/profile/<%=request.guarantor2ID%>"><%=request.guarantor2Username%></a></td>                                  
                          <%  } %>

                            <td><span class="badge badge-warning"> <a href="/user/profile/<%=User._id%>/loan-request/<%=request._id%>/status">Check Status</a> </span></td>                   
                       </tr>
                  <%  })%>
                </tbody>
            </table>
    </div>
</div>

<% include ../partials/footer.ejs %>